// A lot of this is based on the Quartz 5.3.3 theme from Bootswatch

// Applies frosted glass and other effects to elements. Applies the variables that were set in the suit/_classic.scss file, or whatever suit you are using.

// Variables

$body-bg-image: linear-gradient(90deg,
    shade-color($cyan, 10%),
    shade-color($purple, 10%),
    shade-color($pink, 5%)) !default;
$frosted-opacity: 0.7 !default;

// Mixins

@mixin glass($opacity: $frosted-opacity, $bg: $white) {
  border: none;
  box-shadow:
    inset 1px 1px $border-color,
    inset -1px -1px rgba($white, 0.1),
    $box-shadow;

  @include frost($opacity, $bg);

  a {
    color: $card-color;
  }

  .text-muted {
    color: rgba($card-color, 0.7) !important;
  }
}

@mixin frost($opacity: $frosted-opacity, $bg: $white, $blur: 5px) {
  background-color: transparent;
  background-image: linear-gradient(125deg,
      rgba($bg, ($opacity)),
      rgba($bg, ($opacity - 0.1)) 70%);
  backdrop-filter: blur($blur);
}

// Body

// body {
//   background-image: $body-bg-image;
// }

// @include color-mode(dark) {
//   body {
//     color: $white;
//   }
// }

// Nav Tabs

// Tables

.table-secondary {
  --bs-table-hover-color: $white;
}

// Buttons

.btn {
  &-secondary {
    color: $white;
    border: none;

    &:hover,
    &:focus {
      color: $white;
    }

    &.disabled {
      color: $white;
    }
  }

  &-outline-dark {
    background-color: rgb(255 255 255 / 10%);
  }

  &.disabled {
    opacity: 0.5;
    cursor: not-allowed;
    user-select: none;
    color: rgb(220 220 220 / 85%);

    &.btn-light {
      color: $mono-700;
    }
  }
}

.btn-group>.btn:not(:first-child),
.btn-group>.btn-group:not(:first-child) {
  margin-left: 0;
}

.btn-group-vertical>.btn:not(:first-child),
.btn-group-vertical>.btn-group:not(:first-child) {
  margin-top: 0;
}

.bg-light .btn {
  background-color: rgba($black, 0.2);
}

// Forms

.input-group-text,
.form-control::file-selector-button {
  background-color: transparent;
  background-image: linear-gradient(125deg,
      rgba($white, 0.3),
      rgba($white, 0.2) 70%);
  backdrop-filter: blur(5px);
  border: none;
}

.form-control:hover:not(:disabled, [readonly])::file-selector-button {
  background-color: rgba($white, 0.1);
}

.input-group-text {
  box-shadow:
    inset 1px 1px $border-color,
    inset -1px -1px rgba($white, 0.1);
}

// .input-group> :not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback) {
//   margin-left: 0;
//   border-left: none;
// }

// .input-group:not(.has-validation)> :not(:last-child):not(.dropdown-toggle):not(.dropdown-menu),
// .input-group:not(.has-validation)>.dropdown-toggle:nth-last-child(n + 3) {
//   border-right: none;
//   border-top-left-radius: 5px;
//   border-bottom-left-radius: 5px;
// }

.form-select:not([multiple]) {
  transition: border-color 0.15s ease-in-out;

  option {
    color: $black;
  }
}

.bg-light .form-control {
  color: $gray-800;
  border-color: rgba($black, 0.2);

  &::placeholder {
    color: rgba($black, 0.2);
  }
}

// Navs
.nav-underline {
  .nav-link {
    &.active {
      color: $primary;
    }
  }
}

.dropdown-menu {
  @include glass(0.3);

  .dropdown-header {
    color: $mono-100;
  }
}

.nav-tabs {
  .nav-link {
    transition: none;

    &:hover,
    &:focus {
      color: $white;
      isolation: auto;
    }

    &,
    &.disabled {
      background-color: $progress-bg;
    }
  }

  .nav-item:first-child>.nav-link {
    border-radius: $border-radius 0 0 $border-radius;
  }

  .nav-item:last-child>.nav-link {
    border-radius: 0 $border-radius $border-radius 0;
  }

  .nav-item .nav-link.active,
  .nav-item.show .nav-link {
    @include glass(1, $white);

    border-radius: $border-radius;
    transform: scale(1.1);

    &:hover,
    &:focus {
      color: $gray-800;
    }
  }

  .nav-item .nav-link {
    transition: color 0.2s linear;

    &.active {
      color: $mono-100 !important;
      font-weight: bold;

      &:hover,
      &:focus {
        color: $mono-400;
      }
    }
  }

  .dropdown-menu {
    border-radius: $border-radius;
  }
}

.nav-pills {
  .nav-link {
    transition: none;

    &:hover,
    &:focus {
      color: $white;
      isolation: auto;
    }

    &.active {
      color: $white;
    }
  }
}

.navbar {
  .navbar-brand {
    font-weight: bold;
  }

  .fixed-top {
    position: fixed !important;
  }

  &.bg-primary {
    .navbar-brand {
      color: $mono-100;
    }

    .navbar-nav {
      .nav-link.active {
        color: $mono-100;
      }
    }
  }

  .nav-link {
    padding-top: 0.15rem;
    padding-bottom: 0.2rem;
  }
}

// Force Icons and SVG to stay on the same lines
.navbar.navbar-nav {
  a {
    display: inline-flex;
    align-items: center;

    /* Vertically center SVG and text */
    white-space: nowrap;

    /* Prevent text wrapping */
  }

  a svg {
    display: inline-block;

    /* Ensure SVG behaves as inline element */
    vertical-align: middle;

    /* Align SVG with text */
  }

  .navbar-dark {
    a.nav-link.dropdown-toggle {
      color: $mono-900;
    }
  }
}

// Force Icons and SVG to stay on the same lines
.navbar {
  .navbar-dark {
    a.nav-link.dropdown-toggle {
      color: $mono-900;
    }
  }
}

// Indicators

.alert {
  border: none;
  box-shadow:
    inset 1px 1px $border-color,
    inset -1px -1px rgba($white, 0.1),
    $box-shadow;

  @include frost(0.59, $white, 2px);

  a {
    color: $card-color;
  }

  .text-muted {
    color: rgba($card-color, 0.7) !important;
  }

  position: relative;
  overflow: hidden;
  color: $mono-100;
  font-weight: bold;
  padding-left: 1.5rem;

  @each $color, $value in $theme-colors {
    $opacity: 0.7;

    &-#{$color}::after {
      position: absolute;
      top: 0;
      left: 0;
      width: 1rem;
      height: 100%;
      content: '';
      background-color: $value;
    }
  }

  .alert-link {
    color: var(--bs-alert-link-color) !important;
    margin-left: 5px;
  }
}

[data-bs-theme='dark'] {
  .alert {
    background-image: linear-gradient(125deg,
        rgb(0 0 0 / 59%),
        rgb(55 55 55 / 49%) 70%);
    color: $mono-900;

    &.alert-light {
      .alert-link {
        --bs-alert-link-color: #eee !important;
      }
    }
  }
}

.badge {
  letter-spacing: 0.03rem;

  &.bg-secondary {
    --bs-bg-opacity: 0.4;
  }

  &.bg-light,
  &.bg-warning,
  &.bg-success {
    color: $mono-100;
  }
}

.toast,
.toast-header,
.toast-body {
  color: $mono-100;
}

.toast {
  --bs-btn-close-color: $mono-100;

  .btn-close {
    --bs-btn-close-color: $mono-100;

    fill: $mono-100;
  }
}

// Containers

.list-group {
  @include glass;
}

.card {
  @include glass;

  --bs-card-cap-color: $mono-100;
  --bs-card-color: $mono-100;

  border-color: $mono-100;
  background: $mono-300;

  @each $color, $value in $theme-colors {
    @if $color ==secondary {
      --bs-secondary-rgb: transparent;
    }

    @else {
      &.bg-#{$color} {
        background-image: none;
      }
    }
  }

  .card-header,
  .card-body {
    color: $gray-800;
  }

  &.bg-light,
  &.text-bg-light {

    .card-header,
    .card-body {
      color: $gray-100;
    }
  }

  &.border {
    @each $color, $value in $theme-colors {
      &-#{$color} {
        @include glass;

        .card-header {
          background-color: $value !important;
          border-bottom: none;

          @if $color ==light {
            color: $gray-800;
          }
        }
      }
    }
  }

  &-header {
    font-weight: $headings-font-weight;
  }
}

// Accordions
.accordion-button {
  &:not(.collapsed) {
    background-color: map.get($purple-stack, 400);
    color: $mono-900;
    font-weight: bold;
  }
}

.accordion-header {
  margin-bottom: 0;
}

.accordion-item {
  color: $mono-100;
  background-color: $mono-900;
  border: none;

  &:not(:first-of-type) {
    border-top: 0;
  }
}

// .accordion-item {
//   @include glass();
//   box-shadow: none;
// }

.toast {
  @include glass;
}

.popover {
  @include glass;

  &-header {
    border-bottom-color: $border-color;
  }
}

.tooltip {
  backdrop-filter: blur(5px);
}

.modal-dialog {
  .form-text {
    color: $mono-100;
  }

  .form-control {
    border-color: $mono-100;
    color: $mono-100;

    &:focus {
      border-color: $mono-100;
      background-color: $mono-900;
      color: $mono-100;
    }
  }

  textarea::placeholder,
  input::placeholder {
    color: $mono-300;
  }
}

.modal-title,
.modal-body {
  color: $mono-300;
}

@include color-mode(dark) {

  .modal-title,
  .modal-body {
    color: $mono-100;
  }
}

.modal-content {
  @include glass;
}

.offcanvas {
  @include glass;

  color: $mono-100;

  .offcanvas-body,
  .offcanvas-header,
  .offcanvas-title {
    color: $mono-100;
  }
}

.card-box {
  perspective: 900px;
  width: 250px;
  position: relative;
}

.card-box .card-component {
  transform-style: preserve-3d;
  position: relative;
  height: 300px;
}

@include media-breakpoint-up(lg) {
  .card-box .card-component {
    height: 450px;
  }
}

.card-box .card-component.card-component-lg {
  height: auto;
  max-height: 800px;
}

@include media-breakpoint-up(md) {
  .card-box .card-component.card-component-lg {
    max-height: 410px;
  }
}

.card-box .card-component.card-component-xs {
  height: auto;
  max-height: 230px;
}

.card-box .card-component .front {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  overflow: hidden;
  box-shadow: 0 1rem 3rem rgb(13 20 49 / 17.5%);
  border-radius: 0.5rem;
  backface-visibility: hidden;
  transform: rotateY(24deg);
}

.card-box .card-component .front:hover {
  cursor: pointer;
}

.card-box .page-card {
  box-shadow: 0 1rem 3rem rgb(13 20 49 / 17.5%);
  border-radius: 0.5rem;
}

.card-box .page-card:hover {
  cursor: pointer;
}

@media (width <=991.98px) {
  .card-box {
    width: 200px;
  }
}

@include media-breakpoint-up(lg) {
  .card-box {
    width: 260px;
  }
}